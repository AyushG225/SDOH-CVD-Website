<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>County Information</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="county_styles.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF and html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Social Determinants of Health + Cardiovascular Disease</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Content Section -->
  <div id="content">
    <!-- Map Container -->
    <div id="map-container">
      <h1 id="county-name">Loading...</h1>
      <p id="county-description">Please wait while we load the county information.</p>
      <h3 class="map-title">Most Important Variable for This County Over Time
        <button id="map-info-button" class="info-button" title="More information">ℹ️</button>
      </h3>
      <div id="county-map">
        <!-- Legend container placed inside the county-map div -->
        <div id="legend-container" class="legend"></div>
      </div>
      <input type="range" id="year-slider" min="2015" max="2025" value="2015" step="1" class="form-range">
      <div id="selected-year" class="text-center fw-bold">2015</div>
    </div>

    <!-- Chart Container -->
    <div id="chart-container">
      <h3 class="chart-title">Cardiovascular Disease Death Rate Over Time
        <button id="chart-info-button" class="info-button" title="More information">ℹ️</button>
      </h3>
      <canvas id="deathsChart"></canvas>
    </div>

    <!-- Feature Weights Container -->
    <div id="feature-weights-container" class="card">
      <div class="card-body">
        <h3 class="card-title">Feature Weights
          <button id="weights-info-button" class="info-button" title="More information">ℹ️</button>
        </h3>
        <table id="feature-weights-table" class="table table-sm table-striped">
          <thead class="table-light">
            <tr>
              <th>Feature</th>
              <th>Weight</th>
            </tr>
          </thead>
          <tbody id="feature-weights-list">
            <!-- Feature weights will be populated here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Map Info Modal -->
    <div id="map-info-modal" class="info-modal">
      <div class="info-modal-content">
        <span class="close-modal">&times;</span>
        <h4>Most Important Variable Information</h4>
        <p>This map shows the most important variable for the selected county and year.</p>
      </div>
    </div>

    <!-- Chart Info Modal -->
    <div id="chart-info-modal" class="info-modal">
      <div class="info-modal-content">
        <span class="close-modal">&times;</span>
        <h4>Cardiovascular Disease Death Rate Information</h4>
        <p>This chart illustrates the cardiovascular disease death rate over time, combining historical data and
          forecasts. The solid line represents the actual data, while the dashed line shows the forecasted data. The
          forecast is based on a machine learning model, while the actual death rates are from CDC's Wonder Database.
          These death rates are a combination of the "Underlying Cause of Death" and "Provisional Mortality Statistics"
          for the set of "disorders of the ciruclatory system," which largely includes cardiovascular disease along with
          vascular diseases.</p>
      </div>
    </div>

    <!-- Feature Weights Info Modal -->
    <div id="weights-info-modal" class="info-modal">
      <div class="info-modal-content">
        <span class="close-modal">&times;</span>
        <h4>Feature Weights Information</h4>
        <p>This table displays the most important features that influence cardiovascular disease in the county for the
          selected year, along with their corresponding weights. The higher the weight, the more significant the
          feature. These weights are calculated by multiplying each feature's importance based on the machine learning
          model, and the scaled value of the county for the selected year, on a scale from 0 to 1.</p>
      </div>
    </div>



    <!-- Generate Report Button -->
    <button id="generate-report" class="btn btn-primary" style="position: fixed; bottom: 20px; right: 20px;">Generate
      Report</button>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Custom JS -->
    <script src="county_script.js"></script>
</body>

</html>